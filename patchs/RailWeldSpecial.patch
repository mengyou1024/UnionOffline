From 19aba2cd97f419c49aeba89d8fa6d7e5d2261475 Mon Sep 17 00:00:00 2001
From: mengyou <1523038073@qq.com>
Date: Fri, 19 Jul 2024 08:35:44 +0800
Subject: [PATCH] patchs: update railweld specialization patch

---
 CMakeLists.txt                    | 4 ++--
 cmake/FindMorose.cmake            | 3 ++-
 config/morose_config.h.in                | 6 +++---
 script/pack-installer.iss.in      | 2 +-
 5 files changed, 9 insertions(+), 8 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 05e7767..ee4bd74 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,8 +1,8 @@
 cmake_minimum_required(VERSION 3.20)
 
-project(UnionOffline LANGUAGES CXX)
+project(RailWeldOffline LANGUAGES CXX)
 
-set(PROJECT_NAME_ZH_CN "390N、T8离线分析软件")
+set(PROJECT_NAME_ZH_CN "390钢轨焊缝离线分析软件")
 
 set(CMAKE_CXX_STANDARD 23)
 set(NUMCPP_NO_USE_BOOST ON)
diff --git a/cmake/FindMorose.cmake b/cmake/FindMorose.cmake
index b64d407..1c04b41 100644
--- a/cmake/FindMorose.cmake
+++ b/cmake/FindMorose.cmake
@@ -489,7 +489,8 @@ add_custom_target(
     COMMAND powershell "Copy-Item -Force -Recurse ${CMAKE_SOURCE_DIR}/.git ${CMAKE_SOURCE_DIR}/output/archive/.git;\
     cd ${CMAKE_SOURCE_DIR}/output/archive/; \
     git reset --hard;\
-    git submodule update --init --recursive" > nul
+    git submodule update --init --recursive;\
+    git apply ./patchs/RailWeldSpecial.patch" > nul
     COMMAND echo "{\
 \"APP_VERSION\":\"${APP_VERSION}\",\
 \"APP_URL\": \"${APP_URL}\",\
diff --git a/config/morose_config.h.in b/config/morose_config.h.in
index a460a70..05b03aa 100644
--- a/config/morose_config.h.in
+++ b/config/morose_config.h.in
@@ -4,8 +4,8 @@
 #define APP_NAME_ZH_CN                 "@PROJECT_NAME_ZH_CN@"
 #define APP_NAME_ZH_CN_TR              QObject::tr("@PROJECT_NAME_ZH_CN@")
 
-#define ENABLE_UNION_GENERIC           (1) ///< 使用通用仪器接口
-#define ENABLE_RAILWELE_SPECIALIZATION (1) ///< 使用钢轨焊缝特化接口
+#define ENABLE_UNION_GENERIC           (0) ///< 使用通用仪器接口
+#define ENABLE_RAILWELE_SPECIALIZATION (1) ///< 使用钢轨焊缝特化接口
 
-#define MOROSE_ENABLE_UPGRADE          (1) ///< 使用软件升级功能
+#define MOROSE_ENABLE_UPGRADE          (0) ///< 使用软件升级功能
 #define MOROSE_DEBUG_UPGRADE           (0) ///< 调试软件升级功能
diff --git a/script/pack-installer.iss.in b/script/pack-installer.iss.in
index 37b4030..55c7007 100644
--- a/script/pack-installer.iss.in
+++ b/script/pack-installer.iss.in
@@ -14,7 +14,7 @@
 [Setup]
 ; 注意:AppId的值唯一标识该应用程序。不要在其他应用程序的安装程序中使用相同的AppId值。
 ; (要生成新的GUID，请在IDE中单击Tools | generate GUID。)
-AppId={{65C66E39-C539-4D2D-9DEF-664965A9C599}
+AppId={{E966BD6F-B7A2-41DD-A96F-FE4DAD7F994E}
 AppName={#MyAppNameZhCN}
 AppVersion={#MyAppVersion}
 ;AppVerName={#MyAppName} {#MyAppVersion}
-- 
2.43.0.windows.1

