From a28d472f6323c979f28e2da91ee3e328163696ef Mon Sep 17 00:00:00 2001
From: mengyou <1523038073@qq.com>
Date: Wed, 9 Apr 2025 08:12:44 +0800
Subject: [PATCH] feat(PXUT-T8): create T8 rail special

---
 CMakeLists.txt               |  4 ++--
 cmake/FindMorose.cmake       |  3 ++-
 config/morose_config.h.in    | 12 ++++++------
 script/pack-installer.iss.in |  2 +-
 4 files changed, 11 insertions(+), 10 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index dd7450e..24a727f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,8 +1,8 @@
 cmake_minimum_required(VERSION 3.20)
 
-project(UnionOffline LANGUAGES CXX)
+project(PXUT-T8_Rail LANGUAGES CXX)
 
-set(PROJECT_NAME_ZH_CN "通用离线分析软件")
+set(PROJECT_NAME_ZH_CN "PXUT-T8钢轨焊缝离线分析软件")
 
 set(CMAKE_CXX_STANDARD 23)
 set(NUMCPP_NO_USE_BOOST ON)
diff --git a/cmake/FindMorose.cmake b/cmake/FindMorose.cmake
index d242a18..af97548 100644
--- a/cmake/FindMorose.cmake
+++ b/cmake/FindMorose.cmake
@@ -502,7 +502,8 @@ add_custom_target(
     COMMAND powershell "Copy-Item -Force -Recurse ${CMAKE_SOURCE_DIR}/.git ${CMAKE_SOURCE_DIR}/output/archive/.git;\
     cd ${CMAKE_SOURCE_DIR}/output/archive/; \
     git reset --hard;\
-    git submodule update --init --recursive" > nul
+    git submodule update --init --recursive;\
+    git apply ./patchs/RailWeldSpecial_PXUT-T8.patch" > nul
     COMMAND echo "{\
 \"APP_VERSION\":\"${APP_VERSION}\",\
 \"APP_URL\": \"${APP_URL}\",\
diff --git a/config/morose_config.h.in b/config/morose_config.h.in
index 27602eb..135e8e2 100644
--- a/config/morose_config.h.in
+++ b/config/morose_config.h.in
@@ -10,16 +10,16 @@
 #define MOROSE_DEBUG_UPGRADE_OPTION          (0) ///< 调试软件升级功能
 
 // A扫接口
-#define MOROSE_ENABLE_DAS_DAT                (1) ///< PXUT-330N .das(单幅) .dat(连续)
-#define MOROSE_ENABLE_COD                    (1) ///< PXUT-F4 .cod(串口数据)
+#define MOROSE_ENABLE_DAS_DAT                (0) ///< PXUT-330N .das(单幅) .dat(连续)
+#define MOROSE_ENABLE_COD                    (0) ///< PXUT-F4 .cod(串口数据)
 #define MOROSE_ENABLE_MDAT                   (1) ///< PXUT-390N, PXUT-T8
-#define MOROSE_ENABLE_DAA_HFD                (1) ///< PXUT-390 钢轨焊缝接口 .daa(单幅) .hfd(连续)
+#define MOROSE_ENABLE_DAA_HFD                (0) ///< PXUT-390 钢轨焊缝接口 .daa(单幅) .hfd(连续)
 
 // TOFD/PE 接口
-#define MOROSE_ENABLE_TOF_TPE                (1) ///< PXUT-F4 TOFD/PE图像
+#define MOROSE_ENABLE_TOF_TPE                (0) ///< PXUT-F4 TOFD/PE图像
 
 // 程序功能
-#define MOROSE_ENABLE_UPGRADE_FEATURE        (1) ///< 软件升级功能
+#define MOROSE_ENABLE_UPGRADE_FEATURE        (0) ///< 软件升级功能
 #define MOROSE_ENABLE_MULTI_LANGUATE_FEATURE (0) ///< 多语言配置
 
 /// 设置功能
@@ -29,4 +29,4 @@
     #define MOROSE_ENABLE_SETTING_FEATURE (0)
 #endif
 
-#define MOROSE_ENABLE_INSTRUMENT_COMMUNICATION_FEATURE (1) ///< 仪器通讯功能
+#define MOROSE_ENABLE_INSTRUMENT_COMMUNICATION_FEATURE (0) ///< 仪器通讯功能
diff --git a/script/pack-installer.iss.in b/script/pack-installer.iss.in
index 3a42983..ab1db83 100644
--- a/script/pack-installer.iss.in
+++ b/script/pack-installer.iss.in
@@ -14,7 +14,7 @@
 [Setup]
 ; 注意:AppId的值唯一标识该应用程序。不要在其他应用程序的安装程序中使用相同的AppId值。
 ; (要生成新的GUID，请在IDE中单击Tools | generate GUID。)
-AppId={{65C66E39-C539-4D2D-9DEF-664965A9C599}
+AppId={{06D763A2-EA1B-4E2E-B233-5CF5E45355F0}
 AppName={#MyAppNameZhCN}
 AppVersion={#MyAppVersion}
 ;AppVerName={#MyAppName} {#MyAppVersion}
-- 
2.43.0.windows.1

